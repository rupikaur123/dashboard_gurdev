<div class="container-fluid">
  <div class="row">
    <div class="col-sm-12">
      <div class="card">
        <div class="card-header">
          <h5>Appointments List</h5>
        </div>
        <div class="card-body custom-datatable">
          <div class="d-flex bd-highlight mb-3">
            <div class="p-2 w-100 bd-highlight">
              <input type="text"  placeholder="Type to filter the name column..." (keyup)="updateFilter($event)"  />
            </div>
          </div>

          <ngx-datatable class="bootstrap" [rows]='apptList' [columnMode]="'force'" [headerHeight]="50"
            [footerHeight]="50" [rowHeight]="'auto'" [limit]="page.limit" [externalPaging]="true" [count]="page.count"
            [offset]="page.offset" (page)="datatablePageData($event)">

            <ngx-datatable-column name="Service Name">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.service_name}}
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Appointment Date">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.appointment_date}}
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="Full Name">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.u_full_name}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Email">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.u_email}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="DOB">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.u_dob}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Address">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.u_address}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Phone No.">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.u_phone_number}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Comment">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.comment}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Actions">
              <ng-template let-row="row" ngx-datatable-cell-template>
                <a class="icon" href="javascript:void(0)"></a><a class="btn btn-primary btn-sm"
                  href="javascript:void(0)" (click)="open(viewAppt,'edit',row)"><i class="fa fa-pencil"></i>
                  View</a><a class="icon" href="javascript:void(0)"></a>
              </ng-template>
            </ngx-datatable-column>

          </ngx-datatable>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Container-fluid Ends -->
<ng-template #viewAppt let-modal>
  <div class="modal-header">
    <strong class="modal-title" id="modal-basic-title">View Appointments</strong>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <div class="modal-body">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <strong>Service Name</strong>
        <input type="text" formControlName="apptName" class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f['apptName'].errors }" readonly />
        <div *ngIf="submitted && f['apptName'].errors" class="invalid-feedback">
          <div *ngIf="f['apptName'].errors['required']">Appointment is required</div>
          <div *ngIf="f['apptName'].errors['minlength']">
            Appointment must be at least 4 characters
          </div>

        </div>
      </div>
      <div class="form-group">
        <strong>Appoinment Date</strong>
        <input type="text" formControlName="apptDate" class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f['apptDate'].errors }" readonly />
        <div *ngIf="submitted && f['apptDate'].errors" class="invalid-feedback">
          <div *ngIf="f['apptDate'].errors['required']">Appointment Date is required</div>


        </div>
      </div>
      <div class="form-group">
        <strong>Full Name</strong>
        <input type="text" formControlName="fullName" class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f['fullName'].errors }" readonly />
        <div *ngIf="submitted && f['fullName'].errors" class="invalid-feedback">
          <div *ngIf="f['fullName'].errors['required']">Full Name is required</div>
        </div>
      </div>
      <div class="form-group">
        <strong>Email</strong>
        <input type="email" formControlName="email" class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f['email'].errors }" readonly />
        <div *ngIf="submitted && f['email'].errors" class="invalid-feedback">
          <div *ngIf="f['email'].errors['required']">Email is required</div>
        </div>
      </div>
      <div class="form-group">
        <strong>DOB</strong>
        <input type="text" formControlName="dob" class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f['dob'].errors }" readonly />
        <div *ngIf="submitted && f['dob'].errors" class="invalid-feedback">
          <div *ngIf="f['dob'].errors['required']">DOB is required</div>
        </div>
      </div>

      <div class="form-group">
        <strong>Address</strong>
        <input type="text" formControlName="address" class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f['address'].errors }" readonly />
        <div *ngIf="submitted && f['address'].errors" class="invalid-feedback">
          <div *ngIf="f['address'].errors['required']">Address is required</div>
        </div>
      </div>
      <div class="form-group">
        <strong>Phone No.</strong>
        <input type="text" formControlName="phone_no" class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f['phone_no'].errors }" readonly />
        <div *ngIf="submitted && f['phone_no'].errors" class="invalid-feedback">
          <div *ngIf="f['phone_no'].errors['required']">Phone No. is required</div>
        </div>
      </div>
      <div class="form-group">
        <strong>Comment</strong>
        <textarea formControlName="comment" class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f['comment'].errors }" readonly></textarea>
        <div *ngIf="submitted && f['comment'].errors" class="invalid-feedback">
          <div *ngIf="f['comment'].errors['required']">Comment is required</div>
        </div>
      </div>
      <div class="form-group">
        <button class="btn btn-primary btn-block">Ok</button>
      </div>
    </form>
  </div>
</ng-template>